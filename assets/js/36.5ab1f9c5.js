(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{342:function(e,t,a){"use strict";a.r(t);var r=a(22),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"jsmap文件扫描"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsmap文件扫描"}},[e._v("#")]),e._v(" jsmap文件扫描")]),e._v(" "),a("h3",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[e._v("#")]),e._v(" 背景")]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("基于webpack打包的时配置错误,但是生产时携带.js.map文件,导致前端代码被还原逆向，详情可见："),a("a",{attrs:{href:"https://www.secpulse.com/archives/132042.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("利用SourceMap还原前端代码"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[e._v("#")]),e._v(" 原理")]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("当请求的地址目标文件是js文件时,主动加.map去探测")]),e._v(" "),a("h3",{attrs:{id:"代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码"}},[e._v("#")]),e._v(" 代码")]),e._v(" "),a("hr"),e._v(" "),a("h4",{attrs:{id:"项目代码路径-rules-filescan-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目代码路径-rules-filescan-js"}},[e._v("#")]),e._v(" 项目代码路径:/rules/filescan.js")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const httputil=require('../methods/httputil')\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar readline = require(\"readline\");\n\nfunction scan(url,headers){\n    const readliner = readline.createInterface({\n            input: fs.createReadStream(__dirname+'/../config/sensiveFile.txt'),\n        });\n         \n        readliner.on('line', function(chunk) {\n            //处理每一行数据\n            filename=chunk.toString()\n            var ret=httputil.request_get(url+'/'+filename,headers)\n            if(ret[0]==200){\n                console.log(ret[1])\n            }\n        });\n         \n        readliner.on('close', function() {\n            //文件读取结束\n    });\n}\n\nfunction scan_jsmapfile(url,headers){  //此处\n    var ret=httputil.request_get(url+\".map\",headers)\n    if(ret[0]==200){\n        console.log('jsmap文件泄漏:'+url+\".map\")\n    }\n}\n\nmodule.exports={\n    scan,\n    scan_jsmapfile\n}\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);